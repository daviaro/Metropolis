<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="#{loginBean.isLogged()? './MainTemplete_Logeado.xhtml':'./MainTemplete.xhtml'}"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="contenido">



        <div class="mj_mapmarker">
            <div id="map"> </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="row">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mj_candidate_section">
            <div class="container">
                <div class="row">
                    <div class="mj_jobinfo">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <div class="row">
                                <div class="mj_showjob">
                                    <p>showing <strong>368</strong> job offers</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <div class="row">
                                <div class="mj_rss_feed">
                                    <p>RSS <i class="fa fa-rss"></i>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="row">
                            <div class="mj_tabcontent mj_bottompadder80">
                                <h:form id="formMostrarOfertabyRecientes" >

                                    <p:dataTable id="ofertas" emptyMessage="No se encontraron resultados" styleClass="table table-striped " var="oferta" value="#{ofertaBean.ofertasbyRecientes}"
                                                 selectionMode="single" selection="#{ofertaBean.ofertaSelected}" rowKey="#{oferta.idOferta}"
                                                 widgetVar="ofertasTable" filteredValue="#{ofertaBean.filteredOfertas}"
                                                 paginator="true"
                                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="5,10,15" paginatorAlwaysVisible="false" >
                                        <p:ajax event="rowSelect" listener="#{ofertaBean.onRowSelect}" />
                                        <p:ajax event="filter" listener="#{ofertaBean.filterListener}"/>
                                        <!--<f:facet name="header">
                                            <p:outputPanel>
                                                <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                <p:columnToggler datasource="ofertas" trigger="toggler" />
                                                <h:outputText value="Buscar por palabra clave" />
                                                <p:inputText id="globalFilter" onkeyup="PF('ofertasTable').filter()"
                                                             styleClass="width:150px" placeholder="Ingrese texto"/>
                                            </p:outputPanel>

                                        </f:facet>-->

                                        <p:column>
                                            <a href="#">
                                                <p:graphicImage value="#{oferta.usuario.foto == null or oferta.usuario.foto.equals('') ? '/images/perfil-sinfoto.png':oferta.usuario.foto }"  styleClass="img-responsive" alt="" width="70" height="70" />
                                            </a>
                                        </p:column>

                                        <p:column filterBy="#{oferta.trabajo.titulo}" headerText="Titulo"
                                                  filterFunction="#{ofertaBean.filterByTituloIgnoreCase}" >
                                            <div style="text-align: center;">
                                                <h:outputText value="#{oferta.trabajo.titulo}" />
                                            </div>
                                        </p:column>


                                        <p:column filterBy="#{oferta.usuario.ubicacion.barrio}" headerText="Barrio"
                                                  filterFunction="#{ofertaBean.filterByBarrio}"> 
                                            <f:facet name="filter">
                                                <p:selectOneMenu onchange="PF('ofertasTable').filter()">
                                                    <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                                    <f:selectItems value="#{ubicacionBean.ubicaciones}" var="ub" itemLabel="#{ub.barrio}" itemValue="#{ub.barrio}" />
                                                </p:selectOneMenu>
                                            </f:facet>

                                            <div style="text-align: center;">
                                                <i class="fa fa-map-marker"> &nbsp;</i>
                                                <h:outputText value="#{oferta.usuario.ubicacion.barrio}" />
                                            </div>
                                        </p:column>

                                        <p:column filterBy="#{oferta.jornada.nombre}" headerText="Jornada"
                                                  filterFunction="#{ofertaBean.filterByJornada}" >
                                            <f:facet name="filter">
                                                <p:selectOneMenu onchange="PF('ofertasTable').filter()">
                                                    <f:selectItem itemLabel="Todos" itemValue="" />
                                                    <f:selectItem itemLabel="Diurna" itemValue="Diurna" />
                                                    <f:selectItem itemLabel="Nocturna" itemValue="Nocturna" />
                                                    <f:selectItem itemLabel="Tiempo Completo" itemValue="Tiempo Completo" />
                                                </p:selectOneMenu>
                                            </f:facet>
                                            <div style="text-align: center;">
                                                <a  class="mj_btn mj_greenbtn">#{oferta.jornada.nombre}</a>
                                            </div>
                                        </p:column>                                                



                                        <p:column filterBy="#{oferta.costo}" headerText="Costo"
                                                  filterFunction="#{ofertaBean.filterByCosto}">
                                            <div style="text-align: center;">
                                                <h:outputText value="#{oferta.costo}" >
                                                    <f:convertNumber maxFractionDigits="0" type="currency" currencySymbol="$" />
                                                </h:outputText>
                                            </div>
                                        </p:column>

                                    </p:dataTable>
                                </h:form>
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 col-lg-offset-4 col-md-offset-4">
                                    <div class="mj_showmore"> <a href="#" class="mj_showmorebtn mj_blackbtn">Show More</a> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <link rel="stylesheet" href="../js/plugins/owl/owl.carousel.css"></link>
        
        
        <script src="../js/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="../js/plugins/jquery-ui/jquery-ui.js"></script>
        <script type="text/javascript" src="../js/plugins/rsslider/jquery.themepunch.revolution.min.js"></script>
        <script src="../js/jquery.mixitup.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBMepyiaqxsnGmfi5gGHts6UYpy7u2aygw"></script>
        <script src="../js/gmaps.js" type="text/javascript"></script>
        <script src="../js/custom.js" type="text/javascript"></script>

        



        <script src="../js/plugins/bootstrap-slider/bootstrap-slider.js" type="text/javascript"></script>

        <script src="../js/plugins/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


        <script src="../js/plugins/isotop/isotope.pkgd.js"></script>
        <script src="../js/plugins/ckeditor/ckeditor.js"></script>
        <script src="../js/plugins/ckeditor/adapters/jquery.js"></script>
        

        <script>
                                                    jQuery(document).ready(function ($) {
                                                        // map marker js

                                                        var map = new GMaps({
                                                            el: '#map',
                                                            lat: 3.449412,
                                                            lng: -76.545209,
                                                            panControl: false,
                                                            streetViewControl: false,
                                                            mapTypeControl: false,
                                                            overviewMapControl: false,
                                                            scrollwheel: false,
                                                            draggable: false,
                                                            navigationControl: false,
                                                            scaleControl: false,
                                                            zoomControl: true,
                                                            disableDoubleClickZoom: true
                                                        });
                                                    });
        </script>
        <script src="../js/plugins/owl/owl.carousel.js" type="text/javascript"></script>
    </ui:define>

</ui:composition>
