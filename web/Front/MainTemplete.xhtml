<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Metropolis2/Ciudad de Oportunidades</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"></meta>
        <meta name="description" content=""></meta>
        <meta name="keywords" content=""></meta>
        <meta name="author" content=""></meta>
        <meta name="MobileOptimized" content="320"></meta>
        <link href="/Metropolis2/css/main.css" rel="stylesheet" type="text/css" />
        <ui:insert name="head"></ui:insert>
        <link rel="shortcut icon" type="image/png" href="/Metropolis2/images/favicon.png" />

    </h:head>

    <h:body>

        <!--Loader Start -->
        <div class="mj_preloaded">
            <div class="mj_preloader">
                <div class="lines">
                    <div class="line line-1"></div>
                    <div class="line line-2"></div>
                    <div class="line line-3"></div>
                </div>

                <div class="loading-text">CARGANDO</div>
            </div>
        </div>
        <!--Loader End -->
        <div class="mj_header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <div class="mj_logo">
                            <a href="index.xhtml"><img src="/Metropolis2/images/logo.png" class="img-responsive" alt="logo"></img></a>
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mj_menu" aria-expanded="false">
                                <span class="sr-only">MENU</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                        <div class="collapse navbar-collapse mj_navmenu" id="mj_menu">
                            <ul class="nav navbar-nav">
                                <li class="active"><a href="index.xhtml">INICIO</a>
                                </li>
                                <li><a href="Trabajador.xhtml">BUSCAR TRABAJO</a></li>
                                <li><a href="Ofertar.xhtml">OFERTAR</a>
                                </li>
                                <li><a href="#">COMO FUNCIONA</a>
                                    <ul class="sub_menu">
                                        <li><a href="Como_Funciona.xhtml">COMO FUNCIONA</a>
                                        </li>
                                        <li><a href="Como_Trabajar.xhtml">COMO TRABAJAR</a>
                                        </li>
                                        <li><a href="#">COMO FUNCIONA PAGOS</a>
                                        </li>
                                        <li><a href="Como_Contratar.xhtml">COMO CONTRATAR</a>
                                        </li>
                                        <li><a href="#">COMO TERMINAR TRABAJO</a>
                                        </li>

                                        <li><a href="Signup.xhtml">CREAR CUENTA</a>
                                        </li>
                                        <li><a href="login.xhtml">INICIAR SESION</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="Contacto.xhtml">CONTACTO</a></li>
                            </ul>
                            <ul class="nav navbar-nav navbar-right mj_right_menu mj_withoutlogin_menu">
                                <li class="mj_searchbtn"><a href="#"><i class="fa fa-search"></i></a>
                                    <div class="mj_search_option">
                                        <h:form>
                                            <div class="form-group">
                                                <div class="input-group">
                                                    <div class="input-group-addon"><i class="fa fa-search"></i>
                                                    </div>
                                                    <p:autoComplete id="acGral" value="#{ofertaBean.ofertaSearchString}" 
                                                                    completeMethod="#{ofertaBean.buscarOferta}" 
                                                                    minQueryLength="3" size="55" effect="blind" styleClass="form-control">
                                                        <p:ajax event="itemSelect"
                                                                listener="#{ofertaBean.verOferta()}" />
                                                    </p:autoComplete> 
                                                </div>
                                            </div>
                                        </h:form>
                                    </div>
                                </li>
                                <li>                                   
                                    <a href="Signup.xhtml"><i class="fa fa-lock"></i>CREAR CUENTA</a>

                                </li>
                                <li><a class="mj_logintoggle" onclick="show_my_div('my_profile_div_login', 'id')"><i class="fa fa-user"></i>INICIAR SESION</a>
                                </li>
                            </ul>
                            <div class="mj_profilediv" id="my_profile_div_login">
                                <h:form id="formLogin">
                                    <p:growl id="growl" sticky="true" showDetail="true" life="3000" globalOnly="true" />
                                    <div class="form-group">
                                        <p:inputText id="email" styleClass="form-control" 
                                                     value="#{loginBean.usuarioLog.email}" 
                                                     required="true" onkeydown="setaFoco(this)"
                                                     requiredMessage="Cual es su email?"
                                                     validatorMessage="Formato de correo incorrecto"
                                                     placeholder="Email">
                                            <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                            <p:clientValidator />
                                        </p:inputText>
                                        <p:message for="email" ></p:message>

                                    </div>
                                    <div class="form-group">
                                        <p:password id="contraseña" styleClass="form-control"  
                                                    value="#{loginBean.usuarioLog.contrasena}"
                                                    promptLabel="Por favor ingrese una contraseña" 
                                                    required="true" 
                                                    requiredMessage="Por favor ingrese su contraseña"
                                                    validatorMessage="Contraseña incorrecta o sin coincidencia. Ingrese una contraseña de minimo 8 caracteres."
                                                    onkeydown="setaFoco(this)"
                                                    placeholder="Contraseña">
                                            <f:validateLength minimum="8" maximum="45" ></f:validateLength>
                                            <p:clientValidator />
                                        </p:password>
                                        <p:message for="contraseña" ></p:message>

                                    </div>
                                    <div class="row">
                                        <div >
                                            <div class="form-group pull-left">
                                                <span><a href="recuperacion.xhtml">¿Olvido Su Cuenta?</a></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mj_showmore">

                                        <p:commandLink id="loginLink" validateClient="true" styleClass="mj_showmorebtn mj_greenbtn" value="Iniciar Sesion" 
                                                       update="growl formLogin" action="#{loginBean.login(event)}" 
                                                       oncomplete="handleLoginRequest(xhr, status, args)" >
                                            <h:outputText styleClass="mj_showmorebtn mj_greenbtn" value="Iniciar Sesión" />

                                        </p:commandLink>                             
                                    </div>
                                </h:form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <ui:insert name="contenido">
        </ui:insert>

        <div class="mj_footer mj_toppadder80 mj_bottompadder80">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 col-lg-offset-2 col-md-offset-2 col-sm-offset-0 col-xs-offset-0">
                        <div class="mj_weight mj_bottompadder20">
                            <a href="index.xhtml"><img src="/Metropolis2/images/logo_footer.png" class="img-responsive" alt=""></img></a>
                            <p>Metrópolis es la plataforma que conecta usuarios, con trabajadores independientes que tienen la capacidad, experiencia y disposición para llevar a cabo los distintos trabajos que necesitas.</p>
                        </div>
                        <div class="mj_weight mj_bottompadder20"><span>Suscribase</span>
                            <form class="form-inline mj_newsletter">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Email"></input>
                                    <button class="mj_newsletterbtn"><img src="/Metropolis2/images/icon-mail.png" alt=""></img>
                                    </button>
                                    &nbsp;</div>
                            </form>
                        </div>
                        <div class="mj_weight mj_bottompadder20">
                            <div class="mj_sociallink">
                                <ul>
                                    <li><a href="#"><i class="fa fa-facebook"></i></a>
                                    </li>
                                    <li><a href="#"><i class="fa fa-twitter"></i></a>
                                    </li>
                                    <li><a href="#"><i class="fa fa-google-plus"></i></a>
                                    </li>
                                    <li><a href="#"><i class="fa fa-behance"></i></a>
                                    </li>
                                    <li><a href="#"><i class="fa fa-dribbble"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="mj_copyright">
                            <p>&copy; 2016 Ciudad Metropolis2 S.A.S.</p>
                            <p>Todos los derechos reservados </p>
                            <span class="glyphicon glyphicon-option-horizontal" aria-hidden="true"></span>
                        </div>
                    </div>
                    <div class="totop">
                        <div class="gototop">
                            <a href="#">
                                <i class="fa fa-angle-up"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <script type="text/javascript">
                function handleLoginRequest(xhr, status, args) {
                    if (args.validationFailed || !args.loggedIn) {
                        //cambio
                        jQuery('#formLogin').effect("shake", {times: 5}, 100);
                    } else {
                        //cambio: ruta enviada desde el bean.
                        location.href = args.ruta;
                    }
                }

                function setaFoco(elemento) {
                    var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
                    if (keyCode == 13) {
                        jQuery('#formLogin\\:loginLink').click();
                    }
                }
            </script>
        </div>

        <!-- Script Start -->


        <!--<script src="/Metropolis2/js/jquery-ui-1.12.1/external/jquery/jquery.js" type="text/javascript"></script>
        <script src="/Metropolis2/js/jquery-ui-1.12.1/jquery-ui.min.js" type="text/javascript"></script>-->

        <!--<script src="/Metropolis2/js/jquery-1.11.3.min.js" type="text/javascript"></script>-->
        <h:outputScript library="default" name="js/jquery-ui-1.12.1/external/jquery/jquery.js"   />
        <h:outputScript library="default" name="js/jquery-ui-1.12.1/jquery-ui.min.js"  />
        <h:outputScript library="default" name="js/jquery-migrate-1.4.1.js"  />
        <h:outputScript library="default" name="js/bootstrap.js"  />
        <h:outputScript library="default" name="js/modernizr.custom.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/jquery.themepunch.tools.min.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/jquery.themepunch.revolution.min.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/revolution.extension.layeranimation.min.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/revolution.extension.navigation.min.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/revolution.extension.parallax.min.js"  /> 
        <h:outputScript library="default" name="js/plugins/rsslider/revolution.extension.slideanims.min.js"  />  
        <h:outputScript library="default" name="js/plugins/countto/jquery.countTo.js"  />  
        <h:outputScript library="default" name="js/plugins/owl/owl.carousel.js"  />  
        <h:outputScript library="default" name="js/plugins/bootstrap-slider/bootstrap-slider.js"  />  
        <h:outputScript library="default" name="js/plugins/fancybox/jquery.fancybox.js"  />  
        <h:outputScript library="default" name="js/plugins/fancybox/jquery.fancybox.pack.js"  />  
        
        <h:outputScript library="default" name="js/jquery.mixitup.js"  />  
        <h:outputScript library="default" name="js/plugins/isotop/isotope.pkgd.js"  />  
        <h:outputScript library="default" name="js/plugins/ckeditor/ckeditor.js"  />  
        <h:outputScript library="default" name="js/plugins/ckeditor/ckeditor.js"  /> 
        <h:outputScript library="default" name="js/plugins/ckeditor/adapters/jquery.js"  /> 
        <h:outputScript library="default" name="js/plugins/fileupload/js/jquery.iframe-transport.js"  />
        <h:outputScript library="default" name="js/plugins/fileupload/js/jquery.fileupload.js"  /> 
        <h:outputScript library="default" name="js/plugins/datetimepicker/jquery.datetimepicker.full.js"  /> 
        <!--<script src="/Metropolis2/js/plugins/ckeditor/adapters/jquery.js"></script>-->
        <h:outputScript library="default" name="js/custom.js"  /> 


    </h:body>

</html>
